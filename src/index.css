@import "tailwindcss";

/* ── Design Tokens ────────────────────────────────────────────────── */
@theme {
  /* Surface */
  --color-surface-base: #030712;
  --color-surface-raised: #111827;
  --color-surface-overlay: #1f2937;

  /* Border */
  --color-border-default: #374151;
  --color-border-subtle: #1f2937;

  /* Text */
  --color-text-primary: #f9fafb;
  --color-text-secondary: #9ca3af;
  --color-text-muted: #6b7280;

  /* Radius */
  --radius-node: 12px;
  --radius-panel: 8px;
  --radius-button: 6px;

  /* Shadow */
  --shadow-node: 0 4px 12px rgba(0, 0, 0, 0.3);
  --shadow-node-hover: 0 8px 24px rgba(0, 0, 0, 0.45);
  --shadow-node-drag: 0 12px 32px rgba(0, 0, 0, 0.55);
  --shadow-panel: 0 8px 32px rgba(0, 0, 0, 0.5);

  /* Transitions */
  --transition-fast: 150ms ease-out;
  --transition-default: 200ms ease-out;
}

/* ── Base ─────────────────────────────────────────────────────────── */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body,
#root {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: system-ui, -apple-system, sans-serif;
  -webkit-font-smoothing: antialiased;
  background-color: var(--color-surface-base);
  color: var(--color-text-primary);
}

/* ── React Flow overrides ────────────────────────────────────────── */
.react-flow__renderer {
  background: transparent;
}

.react-flow__edge-path {
  cursor: pointer;
}

.react-flow__selection {
  border-color: var(--color-border-default);
  background: rgba(75, 85, 99, 0.08);
}

/* Cursor states */
.react-flow__pane {
  cursor: grab;
}
.react-flow__pane:active {
  cursor: grabbing;
}
.react-flow__node {
  cursor: pointer;
}
.react-flow__handle {
  cursor: crosshair;
  transition: all var(--transition-fast);
}
.react-flow__handle:hover {
  transform: scale(1.4);
  background: rgba(255, 255, 255, 0.7) !important;
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.25);
}

/* Controls */
.react-flow__controls-button {
  background: var(--color-surface-overlay) !important;
  border-color: var(--color-border-default) !important;
  fill: var(--color-text-secondary) !important;
}
.react-flow__controls-button:hover {
  background: var(--color-border-default) !important;
}

/* MiniMap */
.react-flow__minimap-node {
  stroke-width: 0;
}

/* ── Blocker edge pulse ──────────────────────────────────────────── */
@keyframes blocker-pulse {
  0%, 100% { filter: drop-shadow(0 0 2px #ef4444); }
  50%      { filter: drop-shadow(0 0 6px #ef444466); }
}
.edge-blocker .react-flow__edge-path {
  animation: blocker-pulse 2.5s ease-in-out infinite;
}
